webpackJsonp([1],{63:function(t,e,a){var i=a(64);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(14).default)("4f65e1ca",i,!0,{})},64:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".vertical-center-modal{display:flex;align-items:center;justify-content:center}.vertical-center-modal .ivu-modal{top:0}",""])},77:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={beforeCreate:function(){},mounted:function(){this.getListData()},data:function(){var t=this;return{addModel:!1,addModelLoading:!0,formValidate:{name:"",remark:""},ruleValidate:{name:[{required:!0,message:"客户名称不能为空",trigger:"blur"}]},listQuery:{page:1,limits:10},pageData:{current_page:1,last_page:0,per_page:10,total:0},columns:[{title:"#",width:90,render:function(e,a){return e("span",t.getListIndex(a.index))}},{title:"职位",key:"job_client"},{title:"人选",key:"candidate_name_mobile"},{title:"推荐时间",key:"created_at"},{title:"状态",key:"status",render:function(e,a){return t.getStatusContent(e,a)}},{title:"操作",minWidth:200,render:function(e,a){return e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.showNotificationModel(a.row)}}},"设置提醒"),e("Button",{props:{type:"text",size:"small"},style:{color:"#19be6b"}},"面试"),e("Button",{props:{type:"text",size:"small"},style:{color:"#ff9900"}},"mark")])}}],data:[],notificationModel:!1,notificationModelLoading:!0,notificationValidate:{title:"",time:"",content:"",recommend_id:""},notificationRuleValidate:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],time:[{required:!0,message:"请选择提醒时间",trigger:"change"}],content:[{required:!0,message:"请填写提醒内容",trigger:"blur"}]},notificationOptions:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}}}},methods:{getListData:function(){var t=this;this.$http.get("/recommends",{params:this.listQuery}).then(function(e){t.data=e.data.data,t.pageData=e.data.meta})},getListIndex:function(t){return(this.pageData.current_page-1)*this.pageData.per_page+t+1},handlePageChange:function(t){this.listQuery.page=t,this.getListData()},handlePageSizeChange:function(t){this.listQuery.limits=t,this.getListData()},showAddModel:function(){this.addModel=!0},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.$http.post("/clients",e.formValidate).then(function(t){e.$Message.success("添加成功"),e.addModelLoading=!1,e.addModel=!1,e.$refs.formValidate.resetFields(),e.listQuery.page=1,e.getListData()}).catch(function(t){e.addModelLoading=!1}):e.addModelLoading=!1})},handleAddClientJobs:function(){},goClientDetail:function(t){this.$router.push({name:"hunter.client.detail",params:{id:t}})},getStatusContent:function(t,e){var a=e.row.status,i=void 0;return 1==a?i=t("div",[t("Button",{props:{type:"text",size:"small",icon:"android-chat"},style:{color:"#ff9900"}},"推荐中...")]):2==a?i=t("div",[t("Button",{props:{type:"text",size:"small",icon:"sad-outline"},style:{color:"#bbbec4"}},"失败")]):3==a?i=t("div",[t("Button",{props:{type:"text",size:"small",icon:"happy-outline"},style:{color:"#19be6b"}},"推荐成功")]):4==a&&(i=t("div",[t("Button",{props:{type:"text",size:"small",icon:"ios-close"},style:{color:"#bbbec4"}},"已关闭")])),i},showNotificationModel:function(t){this.notificationValidate.title="面试提醒",this.notificationValidate.content="提醒 "+t.candidate_name_mobile+" 3 个小时之后去 "+t.client+" 面试 "+t.job_name,this.notificationValidate.recommend_id=t.id,this.notificationModel=!0},notificationTimeChange:function(t){console.log(t),this.notificationValidate.time=t},handleNotificationSubmit:function(t){var e=this;this.$refs[t].validate(function(a){a?e.$http.post("/recommends/remind",e.notificationValidate).then(function(a){e.$Message.success("设置成功"),e.notificationModelLoading=!1,e.notificationModel=!1,e.$refs[t].resetFields()}).catch(function(t){e.notificationModelLoading=!1}):e.notificationModelLoading=!1})}}},o=a(13);var n=function(t){a(63)},l=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Tabs",{attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"我的推荐",name:"name1"}},[a("Table",{attrs:{columns:t.columns,data:t.data,size:"small"}}),t._v(" "),a("div",{staticClass:"page"},[a("Page",{attrs:{total:parseInt(t.pageData.total),"page-size":parseInt(t.pageData.per_page),current:parseInt(t.pageData.current_page),size:"small",placement:"top","page-size-opts":[10,20,30,50,100],"show-elevator":"","show-sizer":""},on:{"on-change":t.handlePageChange,"on-page-size-change":t.handlePageSizeChange}})],1)],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"新增客户","class-name":"vertical-center-modal","ok-text":"提交",loading:t.addModelLoading},on:{"on-ok":function(e){t.handleSubmit("formValidate")}},model:{value:t.addModel,callback:function(e){t.addModel=e},expression:"addModel"}},[a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"客户名称",prop:"name"}},[a("Input",{attrs:{placeholder:"客户公司名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1),t._v(" "),a("FormItem",[a("Row",[a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"dashed",long:"",icon:"plus-round"},on:{click:t.handleAddClientJobs}},[t._v("添加职位")])],1)],1)],1)],1)],1)]),t._v(" "),a("Modal",{attrs:{title:"设置提醒","class-name":"vertical-center-modal","ok-text":"提交",loading:t.notificationModelLoading},on:{"on-ok":function(e){t.handleNotificationSubmit("notificationValidate")}},model:{value:t.notificationModel,callback:function(e){t.notificationModel=e},expression:"notificationModel"}},[a("div",[a("Form",{ref:"notificationValidate",attrs:{model:t.notificationValidate,rules:t.notificationRuleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{placeholder:"面试提醒"},model:{value:t.notificationValidate.title,callback:function(e){t.$set(t.notificationValidate,"title",e)},expression:"notificationValidate.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"提醒时间",prop:"time"}},[a("DatePicker",{attrs:{type:"datetime",options:t.notificationOptions,placeholder:"选择提醒时间"},on:{"on-change":t.notificationTimeChange},model:{value:t.notificationValidate.time,callback:function(e){t.$set(t.notificationValidate,"time",e)},expression:"notificationValidate.time"}})],1),t._v(" "),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"提醒面试者(手机号码)3个小时后去XX公司面试XX岗位"},model:{value:t.notificationValidate.content,callback:function(e){t.$set(t.notificationValidate,"content",e)},expression:"notificationValidate.content"}})],1)],1)],1)])],1)},[],!1,n,null,null);e.default=l.exports}});